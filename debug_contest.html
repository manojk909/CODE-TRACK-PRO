<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contest Debug</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Contest Problem Debug Page</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Problem: Simple Calculator</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Description:</strong></p>
                        <p>Write a function that takes two numbers and returns their sum.</p>
                        
                        <p><strong>Example:</strong></p>
                        <pre>Input: 5, 3
Output: 8</pre>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Code Editor</h5>
                    </div>
                    <div class="card-body">
                        <textarea class="form-control" rows="10" id="codeEditor" placeholder="Write your Python code here...">def add_numbers(a, b):
    # Write your solution here
    return a + b

# Test
print(add_numbers(5, 3))</textarea>
                        
                        <div class="mt-3">
                            <button class="btn btn-primary" onclick="runCode()">Run Code</button>
                            <button class="btn btn-success" onclick="submitCode()">Submit</button>
                        </div>
                        
                        <div class="mt-3">
                            <label class="form-label">Output:</label>
                            <div id="console" class="bg-dark text-white p-3 rounded" style="min-height: 100px;">
                                Console output will appear here...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function runCode() {
            const code = document.getElementById('codeEditor').value;
            document.getElementById('console').innerHTML = 'Running code...';
            
            fetch('/contest/4/problem/5/run', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `code=${encodeURIComponent(code)}&custom_input=&language=python`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('console').innerHTML = 
                        `<span class="text-success">Success!</span>\nOutput: ${data.output}\nTime: ${data.execution_time}s`;
                } else {
                    document.getElementById('console').innerHTML = 
                        `<span class="text-danger">Error:</span>\n${data.error}`;
                }
            })
            .catch(error => {
                document.getElementById('console').innerHTML = 
                    `<span class="text-danger">Network Error:</span>\n${error}`;
            });
        }
        
        function submitCode() {
            const code = document.getElementById('codeEditor').value;
            document.getElementById('console').innerHTML = 'Submitting...';
            
            fetch('/contest/4/submit/5', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `code=${encodeURIComponent(code)}&language=python`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    document.getElementById('console').innerHTML = 
                        `<span class="text-success">Submitted!</span>\nStatus: ${data.status}\nScore: ${data.score}\nTests: ${data.message}`;
                } else {
                    document.getElementById('console').innerHTML = 
                        `<span class="text-danger">Submit Error:</span>\n${data.error}`;
                }
            })
            .catch(error => {
                document.getElementById('console').innerHTML = 
                    `<span class="text-danger">Network Error:</span>\n${error}`;
            });
        }
    </script>
</body>
</html>